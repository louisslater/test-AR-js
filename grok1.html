<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPS Map to AR Box</title>
    <!-- Leaflet.js for map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- A-Frame for AR scene -->
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <!-- AR.js for location-based AR -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
        body { margin: 0; font-family: Arial, sans-serif; }
        #map { height: 70vh; width: 100%; }
        #coords { text-align: center; padding: 10px; font-size: 16px; }
        #ar-container { display: none; height: 100vh; width: 100%; }
    </style>
</head>
<body>
    <!-- Map container -->
    <div id="map"></div>
    <!-- Latitude/Longitude display -->
    <div id="coords">Loading coordinates...</div>
    <!-- AR container -->
    <div id="ar-container">
        <a-scene vr-mode-ui="enabled: false" arjs="sourceType: webcam; videoTexture: true; debugUIEnabled: false;">
            <!-- AR camera with GPS -->
            <a-camera gps-camera rotation-reader></a-camera>
            <!-- Square box on the floor at target location -->
            <a-box position="0 -1 0" width="2" height="0.1" depth="2" color="blue" gps-entity-place="latitude: 53.0845626; longitude: -0.9566571"></a-box>
        </a-scene>
    </div>

    <script>
        // Target location and radius
        const targetLat = 53.0845626; 
        const targetLong = -0.9566571;
        const radius = 50; // 50 meters

        // DOM elements
        const mapDiv = document.getElementById('map');
        const coordsDiv = document.getElementById('coords');
        const arContainer = document.getElementById('ar-container');

        // Initialize Leaflet map
        const map = L.map('map').setView([targetLat, targetLong], 15); // Start centered on target
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap contributors'
        }).addTo(map);
        let marker = L.marker([0, 0]).addTo(map); // Your position marker
        L.marker([targetLat, targetLong]).addTo(map); // Target location marker

        // Function to calculate distance (Haversine formula)
        function getDistance(lat1, lon1, lat2,
